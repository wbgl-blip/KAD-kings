* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
html, body { margin:0; padding:0; background:#0b0b0b; color:#fff; font-family:system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; }

.app { min-height:100vh; padding:18px 14px 140px; background:radial-gradient(1100px 520px at 50% 0%, #141414, #0b0b0b 60%, #070707); }
h1 { margin:10px 0 14px; text-align:center; font-size:34px; font-weight:900; }

.stage { display:grid; gap:12px; margin-bottom:14px; }

/* STACK */
.card-stack { border:none; background:transparent; padding:0; cursor:pointer; display:grid; justify-items:center; gap:10px; position:relative; }
.card-stack.disabled { opacity:.35; pointer-events:none; }
.stack-back { position:absolute; width:210px; height:260px; border-radius:24px; background:#101010; border:1px solid rgba(255,255,255,.06); box-shadow:0 22px 55px rgba(0,0,0,.45); }
.back-1 { transform:translateY(-10px); opacity:.85; }
.back-2 { transform:translateY(-20px); opacity:.65; }

.stack-card { position:relative; width:210px; height:260px; border-radius:24px; background:#f4f4f5; color:#0b0b0b; box-shadow:0 22px 55px rgba(0,0,0,.45); display:grid; place-content:center; transform-origin:50% 30%; }
.card-stack:active .stack-card { transform:translateY(-3px) scale(.99); }
.card-face { font-size:58px; font-weight:950; letter-spacing:1px; line-height:1; }
.card-meta { margin-top:8px; font-size:13px; opacity:.55; text-align:center; }
.stack-hint { font-size:12px; letter-spacing:.2px; opacity:.55; }

.stack-card.reveal { animation:cardIn 520ms cubic-bezier(.2,.9,.2,1) both; }
@keyframes cardIn { 0%{transform:translateY(-34px) scale(.92); opacity:0;} 45%{transform:translateY(-6px) scale(1.02); opacity:1;} 100%{transform:translateY(0) scale(1); opacity:1;} }

/* INFO */
.info-bar { display:grid; grid-template-columns:repeat(5,1fr); gap:10px; }
.pill { background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.06); border-radius:14px; padding:10px; text-align:center; }
.pill-label { font-size:10.5px; letter-spacing:.4px; opacity:.55; }
.pill-value { margin-top:4px; font-size:13.5px; font-weight:750; }

/* PLAYERS */
.table { display:grid; grid-template-columns:repeat(3,1fr); gap:10px; }
.player { border:1px solid rgba(255,255,255,.06); background:rgba(255,255,255,.03); border-radius:16px; padding:10px; text-align:left; color:#fff; cursor:pointer; }
.player.active { border-color:rgba(34,197,94,.55); box-shadow:0 0 0 1px rgba(34,197,94,.22) inset; }
.player.tile-disabled { opacity:.35; cursor:not-allowed; }
.player.selectable { border-color:rgba(255,255,255,.18); }

.video-surface { width:100%; aspect-ratio:1/1; border-radius:12px; background:radial-gradient(circle at 30% 25%, #202020, #101010); border:1px solid rgba(255,255,255,.05); margin-bottom:8px; }

.tile-row { display:flex; align-items:center; justify-content:space-between; gap:8px; }
.name { font-size:13.5px; font-weight:850; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.count { font-size:12.5px; opacity:.75; }
.action { font-size:12px; font-weight:900; padding:6px 8px; border-radius:10px; background:rgba(255,255,255,.10); }

.badges { display:flex; align-items:center; gap:6px; }
.badge { height:18px; min-width:18px; padding:0 6px; border-radius:999px; font-size:11px; font-weight:900; background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.12); }
.badge.qm { border-color:rgba(250,204,21,.55); }
.badge.thumb { border-color:rgba(168,85,247,.55); }
.badge.heaven { border-color:rgba(56,189,248,.55); }
.badge.mate { border-color:rgba(255,255,255,.22); }
.badge.follows { border-color:rgba(255,255,255,.18); opacity:.9; }

/* LINKS OVERLAY */
.links-overlay { position:fixed; inset:0; background:rgba(0,0,0,.55); display:grid; place-items:center; z-index:50; }
.links-card { width:min(92vw,420px); background:#0f0f0f; border:1px solid rgba(255,255,255,.08); border-radius:16px; padding:14px; }
.links-title { font-weight:900; margin-bottom:8px; }
.links-empty { opacity:.6; }
.link-row { display:flex; gap:8px; padding:6px 0; }
.leader { font-weight:800; }
.arrow { opacity:.6; }
.followers { opacity:.9; }
.links-close { margin-top:10px; width:100%; border:none; border-radius:12px; padding:10px; font-weight:900; }

/* DOCK */
.dock { position:fixed; left:12px; right:12px; bottom:12px; display:grid; grid-template-columns:repeat(5,1fr); gap:10px; padding:12px; border-radius:18px; background:rgba(0,0,0,.55); border:1px solid rgba(255,255,255,.08); backdrop-filter:blur(16px); }
.dock-btn { border:none; border-radius:14px; padding:14px 10px; font-size:12.5px; font-weight:950; background:rgba(255,255,255,.08); color:#fff; cursor:pointer; }
.dock-btn.reset { background:rgba(255,255,255,.9); color:#0b0b0b; }
.dock-btn:disabled { opacity:.35; cursor:not-allowed; }

/* CANCEL BAR */
.cancel-bar { position:fixed; left:12px; right:12px; bottom:86px; display:flex; align-items:center; justify-content:space-between; gap:10px; padding:12px; border-radius:16px; background:#101010; border:1px solid rgba(255,255,255,.10); }
.cancel-text { font-size:13px; opacity:.85; }
.cancel-btn { border:none; border-radius:12px; padding:10px 12px; font-weight:900; }
.app.reaction { background:radial-gradient(1100px 520px at 50% 0%, #1b0b0b, #0b0b0b 60%, #070707); }
